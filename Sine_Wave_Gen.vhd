-- Generated by sine_wave_generator.c
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.NUMERIC_STD.ALL;

entity Sine_Wave_Gen is
generic (
    IP_INPUT_FREQUENCY : integer := 100000000;
    OUTPUT_SIGNAL_FREQUENCY : integer := 50
);
Port (
    clk : in STD_LOGIC;
    M_AXIS_tDATA : out std_logic_vector(15 downto 0);
    M_AXIS_tVALID : out std_logic
);
end Sine_Wave_Gen;

architecture Behavioral of Sine_Wave_Gen is
constant Cycles  : integer := (IP_INPUT_FREQUENCY/OUTPUT_SIGNAL_FREQUENCY)/(2**SIN_DATA_WIDTH-1);
signal sin_indx  : unsigned(6 downto 0) := (others=>'0');
signal cnt       : unsigned(31 downto 0) := (others=>'0');

constant SIN_TABLE_Length : integer := 256;
constant SIN_DATA_WIDTH : integer := 16;
type SIN_TABLEType is array(0 to SIN_TABLE_Length-1) of integer;
constant SIN_TABLE : SIN_TABLEType :=(0,804,1607,2410,3211,4011,4808,5602,6392,7179,7961,8739,9512,10278,11039,11793,12539,13278,14010,14732,15446,16151,16846,17530,18204,18868,19519,20159,20787,21403,22005,22594,23170,23732,24279,24812,25330,25832,26319,26790,27245,27684,28106,28511,28898,29269,29621,29956,30273,30572,30852,31114,31357,31581,31785,31971,32138,32285,32413,32521,32610,32679,32728,32758,32767,32758,32728,32679,32610,32521,32413,32285,32138,31971,31785,31581,31357,31114,30852,30572,30273,29956,29621,29269,28898,28511,28106,27684,27245,26790,26319,25832,25330,24812,24279,23732,23170,22594,22005,21403,20787,20159,19519,18868,18204,17530,16846,16151,15446,14732,14010,13278,12539,11793,11039,10278,9512,8739,7961,7179,6392,5602,4808,4011,3211,2410,1607,804,0,-804,-1607,-2410,-3211,-4011,-4808,-5602,-6392,-7179,-7962,-8739,-9512,-10278,-11039,-11793,-12539,-13279,-14010,-14732,-15446,-16151,-16846,-17530,-18205,-18868,-19519,-20159,-20787,-21403,-22005,-22594,-23170,-23732,-24279,-24812,-25330,-25832,-26319,-26790,-27245,-27684,-28106,-28511,-28898,-29269,-29621,-29956,-30273,-30572,-30852,-31114,-31357,-31581,-31786,-31971,-32138,-32285,-32413,-32521,-32610,-32679,-32728,-32758,-32767,-32758,-32728,-32679,-32610,-32521,-32413,-32285,-32138,-31971,-31785,-31580,-31356,-31114,-30852,-30572,-30273,-29956,-29621,-29269,-28898,-28510,-28105,-27684,-27245,-26790,-26319,-25832,-25329,-24812,-24279,-23731,-23170,-22594,-22005,-21402,-20787,-20159,-19519,-18867,-18204,-17530,-16845,-16151,-15446,-14732,-14009,-13278,-12539,-11792,-11038,-10278,-9511,-8739,-7961,-7179,-6392,-5601,-4807,-4010,-3211,-2410,-1607,-804);

begin
process(clk)
begin
    if rising_edge(clk) then
        cnt <= cnt+1;
        M_AXIS_tVALID <= '0';
        if(cnt=Cycles)then
            cnt <= (others=>'0');
            sin_indx <= sin_indx+1;
            M_AXIS_tVALID <= '1';
            M_AXIS_tDATA <= std_logic_vector(to_signed(SIN_TABLE(to_integer(sin_indx)),SIN_DATA_WIDTH));
        end if;
    end if;
end process;
end Behavioral;
